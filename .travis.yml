sudo: required
dist: trusty
services:
- docker
env:
  global:
  - PATH=$HOME/.local/bin:$PATH
  - PKGFORGE_STATEFILE=/tmp/pkgforge
  - BUCKET=akerl-hookshot
  - secure: KfMumvHakZayxSOrTMiA3om9ubTXwyZWWHu/C591eaG4iCdNBux2GjQ/BLM58WspAM+c/HgIK9nGh2/4VuQjNXcamDkFvXAdlg2DrZeVVcfE47C9pDa9gYuepRi2aNXGMd7mHag1/Sl4YJwPZ1XekCi0FEy6NVHGBPt7v/mj2p/WsdXUpbhVjHLWXrsaGod6w2nedEs5jY5hNpm64emOEWBXBDUfMPSGxFjnMhDdhtb4lMG8wCn72S7iHXjficpOspJO/M/5evJolpB2vMTVt//8NP2X5w4oHuXDlr97VKGvPA+l5PkeDyW57LrBNqRBg9MGn+O8fNeBo0F/rmA1oCu2sRH7VhVHtxyqEzwlXfgAr5uDeXEqb4+vkc/EiUO/BKPFLdwIkO6O/fvbFb/gnbu1o6YOTugswaHDnJS66i09RCkELB+FVWgVwiWuPCLDXdpBVlgQGJI03Syl43vVKdVnTihflzFLtOF/9MZ0XIT4jOG8x6XwGrT7hzey73IqFWOk1EDyxJbRuTROgBEYLWhZO1+ULARGzpZQ/mFFah1OlWjcICO9no0mdXvuqFeJtFuJjVGZillvQjVDlOiGESltwtLMZmYRBTI27+ZuGmVhmBy4O0NWxGuFI1uviD7ZYL28+wdQeeLzhyJqpB9/HsEU0kYhyUYcDPaP+eMG24Q=
  - secure: KXeZRjswm4MjT1jh34G3NVXfeVNXYWktWHwIbMkEZ5DC2WFEMFp1/rLOiMuVyYm3E/objfaj6VJt9b8dHw2/jV+q1ViL37G8HE7G6fNksRh1NYwjywdZuLQYtcRe7AQuyog/lcjUkkM8Nj7qjLgi0VvFS2rx+PLSi4+VkYF+PkujuOKG5RE+XwqRaaqsqGBUs6RIAwgvaxYufuJ+1HcKltruvxm+9E5vAqIXCi0B6glKgHHHhAeMP4i5S2Eial3QJnVBkt1fFRERrU0a4XTv8ZiZNUZrS8XBRRlNsaWfFAL3i014lyas++eq6R9b65YBsU2aOAX+++M0x2hq1QSejDwCIQaZ8lrVa0Ng90oxrJkGLqoYM1+baas2oRTjeO5qlb4DmgJAoQvlOeEVkJdMAC5n29hdSMm2/xPA5adu8s9zebOqZ91MHFQhI1CmglUjekmwYxFBwhBUMozbwZq9V2nK6quZ+wkHqZ9mYJJBMf/C4lzIx6Ca+ywFCpmVa7dh5oniFKx2WNiTkJdpLPLmR07KhhZq4TikhvVyf6ll1N52CeHC9aMI10HNFtHbQ7Kj+s4Cks5tD6OwuWMkmVbJNM8wvb99vZ3Bja/KodOv/VQ4zJ7vbXtPCeMHJY7iHqwx75S/fHK2IhTPPPAsTkTbPIpoqU8V6Uk/zA8teDmFi2E=
  - secure: NT8sFHhe38j/6UCFBkQEnAt2LHFL1XInUbj72HFOkztNFd5OFt/dKAKjOZ7/ffhVnZaPJ8z4L7RZrdEpUk0qwta1zBrRH3b9IAWzEv4MGlc3v9ztMBUVZqHPwjFs5c3D1wHLdBMToe8kIBFNS3Vt/36+05sF0SVlwCE2M50GtbZzmwwkJW7pArIRUuX3J843P7VOgPJnDG6H4AkMw/lcmSOAokoN9ZJ8IdDu2T8luOQUOoaUdsiuq5gb5580auPsq3yu+oekD8EqNdv5GPJJ7pNRpd91fNH5qfEvI2Lchp+Z43qe6qb1IC/8GpcRnTy3kIW5yliAO1p8v5mvQZYiXG2I3bgpGMq6/QE8mr0ypBLepE71qSKsMT6qUb/4GPx+xi4J1uhuxvpC+KEZRiNjLQjUAYA19dD9LsBOqKnfUmcGG9wgeq56BFCuNM7+i1UkFj9wNpLbXpF3jp/V9KuwdiGQCh0CpWxNWBTbKg554J6EPsB5GDaNd7y02ptYlX5sm8aNNvJVzvLmPUJ1xBZZeBh4JuwCP7sokzXBAQWeSLNG7Eq5G4oO+07FZKx/8cW3SPp9LVRBy9N3oj70bAsgT0k46Ckmmy6APQgqVLS9PQ81fBlpaMBBT1q/gu8TOAX5+7KyB/8dIgHE6UIRnskIsQ7bMbGyKdJmm114QBEn9Lw=
before_install:
- pip install --user awscli
script: make
deploy:
  provider: script
  script: make release && aws s3 cp pkg/payload.zip "s3://$BUCKET/lambdas/payload-$TRAVIS_TAG.zip"
    || travis_terminate 1
  skip_cleanup: true
  on:
    tags: true
notifications:
  email: false
  slack:
    secure: RAd7QO/gf+1DdAIx+CuYrGdBTyeJ+lk3hM20v+hD7Bk0Dh0bQPQstsAvP+iMTsr2BbzkM+jiM7xMT22dmhfXYmIjo8tIGr9QzkEVwnClO61hN0C5iiJmhAQGmyS/eDQhrImMjA8iX5UdYNdQzBO0gWJ0AP93RG4tr3XebyENvP0SxeVYcR2Gs5rPXiPn9xXpiYypp4XxwBsuGGq8qZxCvcF6/RneWz0QuonWFsc2hU4mmq6Nlld6QFHSnAxG4t3leQbF/9LsxwmrXHCNOz+3mAOXpudNjc/24RLTBne0nqzOJjmul3yEjMeWNsWtB3MX9nyk0fd23Bgk5ACioKcmQH2CVzrWvtJWcBz1Liu/nYzs4U9NwXUXWcRV6lGMYygRXav/2jJtT66/am/JWmW39hFiqbIffyfgRZ+5b/rHbjsQA/OLEP4ZxUKOMe5PfkAABB0QO0x2BAfZK5FM1nJdRYHsMbU5xRT9AyOtOwM0F8hy933rNt+/hid6QoSYU1Hy2k1CxkJtT7fHpHtq9FmPS3oU8KMijlQaGbaaI+u5lCMqCHbUZyDX2qpdfcWK3mmWe8gcGTwMyog303+1fCPXEUmmaFSOpdjvhqBuJaveGDBm82yA9emSU4nx5nDMAAyfqprGHsyzLkATT4Rb9apgYNcvGOuC4h2wNyygXytkdXU=
